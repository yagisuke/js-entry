<!DOCTYPE html>
<html lang="ja">
<head>
  <title>ch6-19 change node.</title>
  <meta charset="utf-8">
</head>
<body>
  <h1>change node</h1>
  <ul id="list">
    <li><a href="JavaScript:void(0)" data-isbn="978-4-7981-3547-2">独習PHP</a></li>
    <li><a href="JavaScript:void(0)" data-isbn="978-4-7981-5081-9">デザインサンプルで学ぶCSSによる実践スタイリング入門</a></li>
    <li><a href="JavaScript:void(0)" data-isbn="978-4-8222-9893-7">基礎からしっかり学ぶC++の教科書</a></li>
    <li><a href="JavaScript:void(0)" data-isbn="978-4-7980-4853-6">TECHNICAL MASTER はじめてのAndroidアプリ開発 第2版 Android Studio 2対応</a></li>
  </ul>
  <input id="del" type="button" value="削除" disabled />
  <div id="pic"></div>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      var list = document.getElementById('list');
      var del = document.getElementById('del');
      var pic = document.getElementById('pic');

      list.addEventListener('click', function(e) {
        var isbn = e.target.getAttribute('data-isbn');

        if (isbn) {
          var img = document.createElement('img');
          img.src = 'http://www.wings.msn.to/books/' + isbn + '/' + isbn + '.jpg';
          img.alt = e.target.innerHTML;
          img.height = 150;
          img.width = 108;
          if (pic.getElementsByTagName('img').length > 0) {
            pic.replaceChild(img, pic.lastChild);
          } else {
            del.disabled = false;
            pic.appendChild(img);
          }
        }
      }, false);

      del.addEventListener('click', function() {
        pic.removeChild(pic.lastChild);
        del.disabled = true;
      }, false);
    }, false);
  </script>
</body>
</html>
